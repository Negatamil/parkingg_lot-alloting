{"ast":null,"code":"import { store } from '../store/store';\nimport { logoutUser } from '../store/slices/authSlice';\nclass SessionManager {\n  constructor() {\n    this.timeoutId = null;\n    this.SESSION_TIMEOUT = 2 * 60 * 60 * 1000; // 2 hours\n  }\n  startSession() {\n    this.resetTimeout();\n    this.addActivityListeners();\n  }\n  resetTimeout() {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n    this.timeoutId = setTimeout(() => {\n      this.handleSessionTimeout();\n    }, this.SESSION_TIMEOUT);\n  }\n  addActivityListeners() {\n    const events = ['mousedown', 'keypress', 'click'];\n    events.forEach(event => {\n      document.addEventListener(event, this.handleActivity.bind(this), true);\n    });\n  }\n  handleActivity() {\n    const {\n      isAuthenticated\n    } = store.getState().auth;\n    if (isAuthenticated) {\n      this.resetTimeout();\n    }\n  }\n  handleSessionTimeout() {\n    store.dispatch(logoutUser());\n    window.location.href = '/login';\n  }\n  endSession() {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n  }\n}\nexport default new SessionManager();","map":{"version":3,"names":["store","logoutUser","SessionManager","constructor","timeoutId","SESSION_TIMEOUT","startSession","resetTimeout","addActivityListeners","clearTimeout","setTimeout","handleSessionTimeout","events","forEach","event","document","addEventListener","handleActivity","bind","isAuthenticated","getState","auth","dispatch","window","location","href","endSession"],"sources":["C:/Users/HomePC/Desktop/parkingg/src/utils/sessionManager.js"],"sourcesContent":["import { store } from '../store/store';\nimport { logoutUser } from '../store/slices/authSlice';\n\nclass SessionManager {\n  constructor() {\n    this.timeoutId = null;\n    this.SESSION_TIMEOUT = 2 * 60 * 60 * 1000; // 2 hours\n  }\n\n  startSession() {\n    this.resetTimeout();\n    this.addActivityListeners();\n  }\n\n  resetTimeout() {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n    \n    this.timeoutId = setTimeout(() => {\n      this.handleSessionTimeout();\n    }, this.SESSION_TIMEOUT);\n  }\n\n  addActivityListeners() {\n    const events = ['mousedown', 'keypress', 'click'];\n    events.forEach(event => {\n      document.addEventListener(event, this.handleActivity.bind(this), true);\n    });\n  }\n\n  handleActivity() {\n    const { isAuthenticated } = store.getState().auth;\n    if (isAuthenticated) {\n      this.resetTimeout();\n    }\n  }\n\n  handleSessionTimeout() {\n    store.dispatch(logoutUser());\n    window.location.href = '/login';\n  }\n\n  endSession() {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n  }\n}\n\nexport default new SessionManager();"],"mappings":"AAAA,SAASA,KAAK,QAAQ,gBAAgB;AACtC,SAASC,UAAU,QAAQ,2BAA2B;AAEtD,MAAMC,cAAc,CAAC;EACnBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,eAAe,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;EAC7C;EAEAC,YAAYA,CAAA,EAAG;IACb,IAAI,CAACC,YAAY,CAAC,CAAC;IACnB,IAAI,CAACC,oBAAoB,CAAC,CAAC;EAC7B;EAEAD,YAAYA,CAAA,EAAG;IACb,IAAI,IAAI,CAACH,SAAS,EAAE;MAClBK,YAAY,CAAC,IAAI,CAACL,SAAS,CAAC;IAC9B;IAEA,IAAI,CAACA,SAAS,GAAGM,UAAU,CAAC,MAAM;MAChC,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC7B,CAAC,EAAE,IAAI,CAACN,eAAe,CAAC;EAC1B;EAEAG,oBAAoBA,CAAA,EAAG;IACrB,MAAMI,MAAM,GAAG,CAAC,WAAW,EAAE,UAAU,EAAE,OAAO,CAAC;IACjDA,MAAM,CAACC,OAAO,CAACC,KAAK,IAAI;MACtBC,QAAQ,CAACC,gBAAgB,CAACF,KAAK,EAAE,IAAI,CAACG,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;IACxE,CAAC,CAAC;EACJ;EAEAD,cAAcA,CAAA,EAAG;IACf,MAAM;MAAEE;IAAgB,CAAC,GAAGnB,KAAK,CAACoB,QAAQ,CAAC,CAAC,CAACC,IAAI;IACjD,IAAIF,eAAe,EAAE;MACnB,IAAI,CAACZ,YAAY,CAAC,CAAC;IACrB;EACF;EAEAI,oBAAoBA,CAAA,EAAG;IACrBX,KAAK,CAACsB,QAAQ,CAACrB,UAAU,CAAC,CAAC,CAAC;IAC5BsB,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EAEAC,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAACtB,SAAS,EAAE;MAClBK,YAAY,CAAC,IAAI,CAACL,SAAS,CAAC;IAC9B;EACF;AACF;AAEA,eAAe,IAAIF,cAAc,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}